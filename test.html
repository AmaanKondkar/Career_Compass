<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Aptitude Test — Career Guidance</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f0f2f5;
    }
    .test-container {
      max-width: 900px;
      margin: 40px auto;
      padding: 30px;
      background: #fff;
      border-radius: 15px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.1);
    }
    .test-header {
      text-align: center;
      margin-bottom: 25px;
    }
    .test-header h1 {
      font-weight: bold;
      color: #007bff;
    }
    .test-header p {
      font-style: italic;
      color: #555;
    }
    .user-info {
      margin-bottom: 20px;
      font-size: 0.9rem;
      color: #333;
    }
    .question-card {
      display: none;
      transition: all 0.5s;
    }
    .question-card.active {
      display: block;
    }
    .options label {
      display: block;
      padding: 10px 15px;
      border-radius: 10px;
      margin-bottom: 8px;
      border: 1px solid #ccc;
      cursor: pointer;
      transition: 0.3s;
    }
    .options input:checked + label {
      background: #007bff;
      color: #fff;
      border-color: #007bff;
    }
    .options label:hover {
      background: #e2f0ff;
    }
    .nav-buttons {
      display: flex;
      justify-content: space-between;
      margin-top: 20px;
    }
    .timer {
      font-weight: bold;
      color: #d63384;
      text-align: right;
      margin-bottom: 15px;
    }
    .score-card {
      text-align: center;
      margin-top: 25px;
      padding: 20px;
      border-radius: 15px;
      background: #e9f7ef;
      border-left: 5px solid #28a745;
      display: none;
    }
    .btn-test-again {
      margin-top: 15px;
    }




    .section-name {
  color: #fff;              /* Text color */
  padding: 5px 10px;
  border-radius: 5px;
  display: inline-block;
  margin-bottom: 8px;
  font-weight: bold;
  font-size: 14px;
}

  </style>
</head>
<body>
  <div class="test-container">
    <div class="test-header">
      <h1>Aptitude Test</h1>
      <p>"Challenge yourself, know your potential!"</p>
    </div>

    <div class="user-info">
      <p><strong>User:</strong> <span id="userName">User</span> | <strong>Email:</strong> <span id="userEmail">email@example.com</span></p>
    </div>

    <div class="timer" id="timer">Time Remaining: 20:00</div>

    <form id="aptitudeForm">
      <!-- Questions will be injected here dynamically -->
    </form>

    <div class="nav-buttons">
      <button type="button" class="btn btn-secondary" id="prevBtn">Previous</button>
      <button type="button" class="btn btn-primary" id="nextBtn">Next</button>
    </div>

    <div class="score-card" id="scoreCard">
      <h4>Test Completed!</h4>
      <p>Your Score: <span id="scorePercent"></span>%</p>
      <button class="btn btn-warning btn-test-again" id="testAgainBtn">Test Again</button>
    </div>
  </div>

  <!-- Firebase SDK -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-app.js";
import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-auth.js";
import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-firestore.js";

// ================= Firebase Config =================
const firebaseConfig = {
  apiKey: "AIzaSyD2fZbAKmL1Cti7NIDcadAh4WqVv5KzbPI",
  authDomain: "career-guidance-e1462.firebaseapp.com",
  projectId: "career-guidance-e1462",
  storageBucket: "career-guidance-e1462.appspot.com",
  messagingSenderId: "566009292247",
  appId: "1:566009292247:web:67720ba8c8030ef7f95792",
  measurementId: "G-4TWBG640XT"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

// ================= User Info =================
let currentUser = null;
onAuthStateChanged(auth, (user) => {
  currentUser = user;
  document.getElementById('userName').textContent = user?.displayName || "Guest";
  document.getElementById('userEmail').textContent = user?.email || "Not logged in";
});

// ================= Questions =================
const questions = [
  
  // ===== Verbal (20 Questions) =====
  {
    section: "Verbal",
    q: "“Loquacious” means:",
    options: ["Silent", "Talkative", "Shy", "Angry"],
    answer: 1
  },
  {
    section: "Verbal",
    q: "Antonym of “Inadvertent”:",
    options: ["Intentional", "Accidental", "Careless", "Random"],
    answer: 0
  },
  {
    section: "Verbal",
    q: "Complete the sentence: The scientist’s explanation was so ___ that even laymen could understand it.",
    options: ["Lucid", "Obscure", "Vague", "Confusing"],
    answer: 0
  },
  {
    section: "Verbal",
    q: "Idiom: “Throw caution to the wind” means:",
    options: ["Be careful", "Take risks", "Ignore", "Run away"],
    answer: 1
  },
  {
    section: "Verbal",
    q: "Synonym of “Ephemeral”:",
    options: ["Eternal", "Temporary", "Permanent", "Infinite"],
    answer: 1
  },
  {
    section: "Verbal",
    q: "Choose the correct word: He has a ___ for solving puzzles.",
    options: ["Penchant", "Aversion", "Dislike", "Fear"],
    answer: 0
  },
  {
    section: "Verbal",
    q: "“Ubiquitous” means:",
    options: ["Rare", "Everywhere", "Hidden", "Limited"],
    answer: 1
  },
  {
    section: "Verbal",
    q: "Antonym of “Altruistic”:",
    options: ["Selfish", "Generous", "Kind", "Benevolent"],
    answer: 0
  },
  {
    section: "Verbal",
    q: "Fill in: The manager spoke in a ___ tone to motivate the team.",
    options: ["Harsh", "Encouraging", "Indifferent", "Monotonous"],
    answer: 1
  },
  {
    section: "Verbal",
    q: "Idiom: “Burn the midnight oil” means:",
    options: ["Sleep late", "Work late", "Light a lamp", "Relax"],
    answer: 1
  },
  {
    section: "Verbal",
    q: "Synonym of “Cacophony”:",
    options: ["Harmony", "Noise", "Silence", "Melody"],
    answer: 1
  },
  {
    section: "Verbal",
    q: "Complete: The politician’s speech was full of ___ and promises.",
    options: ["Vagueness", "Clarity", "Certainty", "Honesty"],
    answer: 0
  },
  {
    section: "Verbal",
    q: "Antonym of “Benevolent”:",
    options: ["Kind", "Malevolent", "Generous", "Compassionate"],
    answer: 1
  },
  {
    section: "Verbal",
    q: "Choose the correct word: His argument was ___ and convincing.",
    options: ["Fallacious", "Cogent", "Weak", "Illogical"],
    answer: 1
  },
  {
    section: "Verbal",
    q: "Idiom: “A blessing in disguise” means:",
    options: ["Something good at first glance", "Something bad that turns good", "Hidden curse", "Clear misfortune"],
    answer: 1
  },
  {
    section: "Verbal",
    q: "Synonym of “Obfuscate”:",
    options: ["Clarify", "Confuse", "Simplify", "Enlighten"],
    answer: 1
  },
  {
    section: "Verbal",
    q: "Complete: The student answered ___ questions in the exam.",
    options: ["Ambiguously", "Accurately", "Incorrectly", "Hastily"],
    answer: 1
  },
  {
    section: "Verbal",
    q: "Antonym of “Prolific”:",
    options: ["Productive", "Unproductive", "Creative", "Abundant"],
    answer: 1
  },
  {
    section: "Verbal",
    q: "Idiom: “Beat around the bush” means:",
    options: ["Avoid the main topic", "Direct approach", "Gardening", "Speak clearly"],
    answer: 0
  },
  {
    section: "Verbal",
    q: "Synonym of “Sagacious”:",
    options: ["Wise", "Foolish", "Reckless", "Ignorant"],
    answer: 0
  },

  // ===== Quantitative (20 Questions) =====
  {
    section: "Quantitative",
    q: "If the sum of three consecutive odd numbers is 75, the largest is:",
    options: ["23", "25", "27", "29"],
    answer: 1
  },
  {
    section: "Quantitative",
    q: "120 km at 60 km/h takes how long?",
    options: ["1 hr", "2 hr", "3 hr", "4 hr"],
    answer: 1
  },
  {
    section: "Quantitative",
    q: "Number series: 2,6,12,20,30,… Next?",
    options: ["40", "42", "45", "50"],
    answer: 1
  },
  {
    section: "Quantitative",
    q: "Ratio 3:5, total 64. First number?",
    options: ["24", "40", "32", "28"],
    answer: 0
  },
  {
    section: "Quantitative",
    q: "If 15% of a number is 60, number = ?",
    options: ["300", "250", "200", "400"],
    answer: 0
  },
  {
    section: "Quantitative",
    q: "Find x: 2x + 7 = 19",
    options: ["6", "5", "7", "4"],
    answer: 0
  },
  {
    section: "Quantitative",
    q: "Average of 5 numbers 2,4,6,8,x = 6. x = ?",
    options: ["10", "12", "8", "6"],
    answer: 0
  },
  {
    section: "Quantitative",
    q: "Solve: (3/4) ÷ (2/5) = ?",
    options: ["15/8", "8/15", "7/10", "5/8"],
    answer: 0
  },
  {
    section: "Quantitative",
    q: "Simple interest of 1000 at 5% for 2 years?",
    options: ["100", "200", "50", "150"],
    answer: 1
  },
  {
    section: "Quantitative",
    q: "3^4 × 3^2 = ?",
    options: ["3^6", "3^8", "3^2", "3^7"],
    answer: 1
  },
  {
    section: "Quantitative",
    q: "50% of 80% of 200 = ?",
    options: ["80", "60", "90", "100"],
    answer: 0
  },
  {
    section: "Quantitative",
    q: "Perimeter of square = 64. Side = ?",
    options: ["16", "32", "64", "16"],
    answer: 0
  },
  {
    section: "Quantitative",
    q: "Next number: 5,10,20,40,…",
    options: ["60", "80", "100", "70"],
    answer: 1
  },
  {
    section: "Quantitative",
    q: "A bag has 3 red, 2 blue, 5 green. Probability red = ?",
    options: ["1/5", "3/10", "2/5", "1/2"],
    answer: 1
  },
  {
    section: "Quantitative",
    q: "Solve x: 5x - 7 = 18",
    options: ["3", "4", "5", "6"],
    answer: 2
  },
  {
    section: "Quantitative",
    q: "Find the LCM of 12 and 18",
    options: ["36", "54", "72", "32"],
    answer: 0
  },
  {
    section: "Quantitative",
    q: "If 2 pencils cost 8₹, 5 pencils cost?",
    options: ["15₹", "20₹", "18₹", "25₹"],
    answer: 1
  },
  {
    section: "Quantitative",
    q: "Area of triangle with base 10, height 8 = ?",
    options: ["40", "50", "80", "60"],
    answer: 0
  },
  {
    section: "Quantitative",
    q: "Solve: 7 + 3 × 2 = ?",
    options: ["13", "20", "17", "10"],
    answer: 0
  },
  {
    section: "Quantitative",
    q: "Next number: 1,4,9,16,…",
    options: ["25", "20", "30", "36"],
    answer: 0
  },

  // ===== General Knowledge (20 Questions) =====
  {
    section: "General Knowledge",
    q: "Highest electronegativity?",
    options: ["Oxygen", "Fluorine", "Nitrogen", "Chlorine"],
    answer: 1
  },
  {
    section: "General Knowledge",
    q: "Great Wall of China purpose?",
    options: ["Trade", "Protect from invaders", "Religion", "Farming"],
    answer: 1
  },
  {
    section: "General Knowledge",
    q: "Theory of relativity by?",
    options: ["Newton", "Einstein", "Galileo", "Tesla"],
    answer: 1
  },
  {
    section: "General Knowledge",
    q: "Capital of Australia?",
    options: ["Sydney", "Melbourne", "Canberra", "Brisbane"],
    answer: 2
  },
  {
    section: "General Knowledge",
    q: "Largest planet in solar system?",
    options: ["Earth", "Jupiter", "Saturn", "Mars"],
    answer: 1
  },
  {
    section: "General Knowledge",
    q: "SI unit of force?",
    options: ["Joule", "Newton", "Watt", "Pascal"],
    answer: 1
  },
  {
    section: "General Knowledge",
    q: "First Prime Minister of India?",
    options: ["Nehru", "Gandhi", "Patel", "Ambedkar"],
    answer: 0
  },
  {
    section: "General Knowledge",
    q: "Water freezes at?",
    options: ["0°C", "100°C", "32°C", "-1°C"],
    answer: 0
  },
  {
    section: "General Knowledge",
    q: "Chemical symbol of Gold?",
    options: ["Ag", "Au", "Gd", "Go"],
    answer: 1
  },
  {
    section: "General Knowledge",
    q: "Speed of light (approx)?",
    options: ["3 × 10^8 m/s", "3 × 10^6", "3 × 10^7", "3 × 10^9"],
    answer: 0
  },
  {
    section: "General Knowledge",
    q: "Author of “Harry Potter”?",
    options: ["Tolkien", "J.K. Rowling", "Lewis", "Suzanne Collins"],
    answer: 1
  },
  {
    section: "General Knowledge",
    q: "First man on Moon?",
    options: ["Buzz Aldrin", "Neil Armstrong", "Yuri Gagarin", "Michael Collins"],
    answer: 1
  },
  {
    section: "General Knowledge",
    q: "Currency of Japan?",
    options: ["Yen", "Dollar", "Euro", "Peso"],
    answer: 0
  },
  {
    section: "General Knowledge",
    q: "Longest river?",
    options: ["Nile", "Amazon", "Ganges", "Yangtze"],
    answer: 0
  },
  {
    section: "General Knowledge",
    q: "Who painted Mona Lisa?",
    options: ["Van Gogh", "Da Vinci", "Picasso", "Rembrandt"],
    answer: 1
  },
  {
    section: "General Knowledge",
    q: "Atom nucleus consists of?",
    options: ["Protons + Neutrons", "Protons + Electrons", "Neutrons only", "Electrons only"],
    answer: 0
  },
  {
    section: "General Knowledge",
    q: "Fastest land animal?",
    options: ["Lion", "Cheetah", "Tiger", "Leopard"],
    answer: 1
  },
  {
    section: "General Knowledge",
    q: "Smallest prime number?",
    options: ["0", "1", "2", "3"],
    answer: 2
  },
  {
    section: "General Knowledge",
    q: "H2O is?",
    options: ["Oxygen", "Hydrogen", "Water", "Salt"],
    answer: 2
  },
  {
    section: "General Knowledge",
    q: "Distance light travels in 1 year?",
    options: ["Light-year", "Kilometer", "Mile", "Parsec"],
    answer: 0
  }


];

// ================= Variables =================
const form = document.getElementById("aptitudeForm");
let currentQuestion = 0;
let answers = [];
let totalTime = 20 * 60; // 20 minutes
const timerEl = document.getElementById("timer");
let timerInterval;

// ================= Functions =================
function renderQuestions() {
  form.innerHTML = "";
  questions.forEach((q, idx) => {
    const card = document.createElement("div");
    card.classList.add("question-card");
    if (idx === 0) card.classList.add("active");

    // Section color
    let sectionColor = "#007bff"; // default blue
    if (q.section === "Verbal") sectionColor = "#6f42c1";        // purple
    else if (q.section === "Quantitative") sectionColor = "#28a745"; // green
    else if (q.section === "General Knowledge") sectionColor = "#fd7e14"; // orange

    card.innerHTML = `
      <h6 class="section-name" style="background: ${sectionColor}; color: #fff; padding:5px 10px; border-radius:5px; display:inline-block; margin-bottom:8px; font-weight:bold;">
        ${q.section}
      </h6>
      <h5>Q${idx + 1}: ${q.q}</h5>
      <div class="options">
        ${q.options.map((opt, i) => `
          <input type="radio" name="q${idx}" id="q${idx}_opt${i}" value="${i}" ${answers[idx] == i ? 'checked' : ''}>
          <label for="q${idx}_opt${i}">${opt}</label>
        `).join('')}
      </div>
    `;
    form.appendChild(card);
  });
}

function showQuestion(index) {
  document.querySelectorAll(".question-card").forEach((c, i) => c.classList.toggle("active", i === index));
  document.getElementById("prevBtn").style.display = index === 0 ? "none" : "inline-block";
  document.getElementById("nextBtn").textContent = index === questions.length - 1 ? "Submit" : "Next";
}

function saveAnswer() {
  const selected = document.querySelector(`input[name="q${currentQuestion}"]:checked`);
  answers[currentQuestion] = selected ? parseInt(selected.value) : null;
}

function startTimer() {
  clearInterval(timerInterval);
  timerInterval = setInterval(() => {
    const min = Math.floor(totalTime / 60);
    const sec = totalTime % 60;
    timerEl.textContent = `Time Remaining: ${min.toString().padStart(2,'0')}:${sec.toString().padStart(2,'0')}`;
    if (totalTime <= 0) {
      clearInterval(timerInterval);
      submitTest();
    }
    totalTime--;
  }, 1000);
}

async function submitTest() {
  saveAnswer();
  let score = 0;
  answers.forEach((a, i) => { if (a === questions[i].answer) score++; });
  const percent = ((score / questions.length) * 100).toFixed(2);

  document.getElementById("scorePercent").textContent = percent;
  document.getElementById("scoreCard").style.display = "block";
  form.style.display = "none";
  document.querySelector(".nav-buttons").style.display = "none";
  clearInterval(timerInterval);

  if (currentUser) {
    await addDoc(collection(db, "aptitudeTests"), {
      userId: currentUser.uid,
      email: currentUser.email,
      score: percent,
      timestamp: serverTimestamp(),
      answers: answers
    });
  }
}

function resetTest() {
  answers = [];
  currentQuestion = 0;
  totalTime = 20 * 60;
  renderQuestions();
  showQuestion(currentQuestion);
  form.style.display = "block";
  document.querySelector(".nav-buttons").style.display = "flex";
  document.getElementById("scoreCard").style.display = "none";
  startTimer();
}

// ================= Initial Setup =================
renderQuestions();
showQuestion(currentQuestion);
startTimer();

// ================= Event Listeners =================
document.getElementById("nextBtn").addEventListener("click", () => {
  saveAnswer();
  if (currentQuestion < questions.length - 1) {
    currentQuestion++;
    showQuestion(currentQuestion);
  } else {
    submitTest();
  }
});

document.getElementById("prevBtn").addEventListener("click", () => {
  saveAnswer();
  if (currentQuestion > 0) {
    currentQuestion--;
    showQuestion(currentQuestion);
  }
});

document.getElementById("testAgainBtn").addEventListener("click", resetTest);
</script>


</body>
</html>
