<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>College Details</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #f8f9fa;
      color: #333;
    }

    /* Banner */
    .banner {
      height: 360px;
      background-size: cover;
      background-position: center;
      position: relative;
    }
    .banner::after {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, rgba(0,0,0,0.7), rgba(0,0,0,0.3));
    }
    .banner-overlay {
      position: relative;
      z-index: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100%;
      color: #fff;
      text-align: center;
      animation: fadeInUp 0.8s ease;
    }
    .logo-img {
      max-height: 110px;
      border-radius: 14px;
      background: #fff;
      padding: 10px;
      box-shadow: 0 6px 20px rgba(0,0,0,0.25);
      transition: transform 0.3s;
    }
    .logo-img:hover { transform: scale(1.08); }
    .back-button {
      position: absolute;
      top: 15px;
      left: 15px;
      z-index: 2;
    }

    /* Cards & Sections */
    .stat-card .card {
      border: none;
      border-radius: 16px;
      background: #fff;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.488);
      transition: transform 0.3s;
    }
    .stat-card .card:hover {
      transform: translateY(-6px);
      box-shadow: 0 8px 20px rgba(0,0,0,0.12);
    }
    h4 {
      border-left: 5px solid #ffca2c;
      padding-left: 12px;
      font-weight: 600;
      margin-bottom: 20px;
    }

    /* Fade In Animation */
    .fade-in { opacity: 0; transform: translateY(25px); animation: fadeIn 0.8s forwards ease-out; }
    @keyframes fadeIn { to { opacity: 1; transform: none; } }

    /* Buttons */
    .btn-apply {
      background-color: #ffca2c;
      border: none;
      font-weight: 600;
      color: #212529;
      padding: 10px 24px;
      border-radius: 10px;
      transition: all 0.3s;
    }
    .btn-apply:hover {
      background-color: #e6b800;
      color: #fff;
      box-shadow: 0 0 15px #ffca2c;
    }
    .btn-back {
      background: rgba(255,255,255,0.9);
      border: none;
      border-radius: 10px;
      padding: 8px 20px;
    }
    .btn-back:hover { background: #ffc107; color: #000; }

    /* Table */
    table.table {
      border-radius: 10px;
      overflow: hidden;
       box-shadow: 0 4px 15px rgba(0, 0, 0, 0.604);
    }
    table thead {
      background: #ffca2c;
      color: #212529;
    }
    table tbody tr:hover { background: #fff3cd; }

    /* Gallery */
    .gallery-img {
      border-radius: 10px;
      cursor: pointer;
      transition: transform 0.3s;
       box-shadow: 0 4px 15px rgba(0, 0, 0, 0.604);
    }
    .gallery-img:hover { transform: scale(1.05); }

    /* Lightbox */
    .modal-img {
      max-width: 100%;
      border-radius: 12px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.625);
    }

    /* Contact / Map */
    .info-card {
      background: #fff;
      border-radius: 16px;
      padding: 20px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.604);
    }
    .lead{
        font-weight: 600;
        color: blue;
    }
  </style>
</head>
<body>
  <div id="collegeDetail"></div>

  <!-- Modal for Gallery -->
  <div class="modal fade" id="imageModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered modal-lg">
      <div class="modal-content bg-transparent border-0">
        <img id="modalImage" class="modal-img" />
      </div>
    </div>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyD2fZbAKmL1Cti7NIDcadAh4WqVv5KzbPI",
      authDomain: "career-guidance-e1462.firebaseapp.com",
      projectId: "career-guidance-e1462",
      storageBucket: "career-guidance-e1462.appspot.com",
      messagingSenderId: "566009292247",
      appId: "1:566009292247:web:67720ba8c8030ef7f95792"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    const id = new URLSearchParams(window.location.search).get("id");
    const container = document.getElementById("collegeDetail");

    const icons = {
      hostel: "üõèÔ∏è",
      library: "üìö",
      labs: "üß™",
      sports: "üèê",
      canteen: "üçΩÔ∏è",
      security: "üõ°Ô∏è",
      wifi: "üì∂",
    };

    async function loadCollege() {
      if (!id) {
        container.innerHTML = '<div class="text-center text-danger">‚ùå No ID found.</div>';
        return;
      }
      const docSnap = await getDoc(doc(db, "collegeList", id));
      if (!docSnap.exists()) {
        container.innerHTML = '<div class="text-center text-warning">‚ö†Ô∏è College not found.</div>';
        return;
      }
      const d = docSnap.data();

      container.innerHTML = `
        <!-- Banner -->
        <div class="banner mb-4" style="background-image: url('${d.bannerUrl || ""}');">
          <a href="aaa.html" class="btn btn-sm btn-back back-button">‚¨Ö Back</a>
          <div class="banner-overlay">
            <img src="${d.logoUrl}" class="logo-img mb-3" alt="Logo" />
            <h1 class="display-5 fw-bold">${d.collegeName || "College Name"}</h1>
            <a href="${d.website}" target="_blank" class="btn btn-apply mt-3">üìù Apply Now</a>
          </div>
        </div>

        <div class="container mb-5 fade-in">
          <!-- Stats -->
          <div class="row text-center mb-5">
            ${[
              { label: d.type, icon: "üéì" },
              { label: d.state, icon: "üìç" },
              { label: d.establishedYear, icon: "üìÖ" },
              { label: d.statsAcc?.placementPercentage ? d.statsAcc.placementPercentage+"% Placement" : "-", icon: "üìä" },
              { label: d.statsAcc?.accreditation, icon: "üèÖ" }
            ].map(stat => `
              <div class="col stat-card mb-3">
                <div class="card p-4 fw-semibold fs-5">${stat.icon} <br>${stat.label || "-"}</div>
              </div>`).join("")}
          </div>

          <!-- About -->
          <div class="mb-5">
            <h4>üìñ About</h4>
            <p class="lead">${d.description || "No description available."}</p>
          </div>

          <!-- Courses -->
          <div class="mb-5">
            <h4>üìö Courses Offered</h4>
            <div class="table-responsive">
              <table class="table table-bordered table-hover">
                <thead>
                  <tr><th>Name</th><th>Duration</th><th>Eligibility</th><th>Exams</th><th>Fees</th><th>Seats</th></tr>
                </thead>
                <tbody>
                  ${(d.courses || []).map(c => `
                    <tr>
                      <td>${c.name}</td>
                      <td>${c.duration} yrs</td>
                      <td>${c.eligibility}</td>
                      <td>${c.exams}</td>
                      <td>‚Çπ${c.fees}</td>
                      <td>${c.seats}</td>
                    </tr>`).join("")}
                </tbody>
              </table>
            </div>
          </div>

          <!-- Facilities -->
          <div class="mb-5">
            <h4>üè¢ Facilities</h4>
            <div class="row text-center">
              ${Object.entries(d.facilities || {}).filter(([_, val]) => val).map(([key]) => `
                <div class="col-4 col-md-2 mb-3">
                  <div class="card p-3 bg-success text-white">
                    ${icons[key] || ""}<br><small>${key.toUpperCase()}</small>
                  </div>
                </div>`).join("")}
            </div>
          </div>

          <!-- Gallery -->
          <div class="mb-5">
            <h4>üñºÔ∏è Gallery</h4>
            <div class="row">
              ${(d.galleryImages || []).map(img => `
                <div class="col-4 col-md-3 mb-3">
                  <img src="${img}" class="img-fluid gallery-img" alt="Gallery Image" onclick="showImage('${img}')"/>
                </div>`).join("")}
            </div>
          </div>

          <!-- Contact + Location -->
          <div class="row g-4">
            <div class="col-md-6">
              <div class="info-card">
                <h4>üìû Contact</h4>
                <p><strong>Phone:</strong> ${d.contact?.phone || "-"}</p>
                <p><strong>Email:</strong> ${d.contact?.email || "-"}</p>
                <p><strong>Website:</strong> <a href="${d.website}" target="_blank">${d.website}</a></p>
              </div>
            </div>
            <div class="col-md-6">
              <div class="info-card">
                <h4>üó∫Ô∏è Location</h4>
                <div id="mapContainer" style="min-height: 260px; border-radius: 12px; overflow: hidden;"></div>
              </div>
            </div>
          </div>

          <!-- Back Button -->
          <div class="text-center mt-5">
            <a href="aaa.html" class="btn btn-back btn-lg">‚¨Ö Back to Search Colleges</a>
          </div>
        </div>
      `;

      // ‚úÖ Map Embed
      const mapContainer = document.getElementById("mapContainer");
      mapContainer.innerHTML = d.contact?.mapEmbed
        ? `<div class="ratio ratio-4x3">${d.contact.mapEmbed}</div>`
        : "<p>Map not available.</p>";
    }

    loadCollege();

    // Gallery Lightbox
    window.showImage = function(src) {
      document.getElementById("modalImage").src = src;
      new bootstrap.Modal(document.getElementById("imageModal")).show();
    }
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
